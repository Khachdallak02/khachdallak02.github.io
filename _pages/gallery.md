---
layout: archive
permalink: /gallery/
title: "Gallery"
author_profile: true
---

{% include base_path %}

<style>
.page__title {
  text-align: center !important;
}

#gallery-container {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 30px;
  margin-top: 20px;
}

@media (max-width: 768px) {
  #gallery-container {
    grid-template-columns: 1fr;
    gap: 20px;
  }
}
</style>

{% if site.gallery %}
  {% assign gallery = site.gallery | sort: 'date' | reverse %}
{% else %}
  {% assign gallery = '' | split: ',' %}
{% endif %}
{% assign total_gallery = gallery | size %}
{% assign per_page = 10 %}

<div id="gallery-container">
  {% for post in gallery %}
    <div class="gallery-item" data-page="{{ forloop.index0 | divided_by: per_page | plus: 1 }}" style="display: none;">
      {% include archive-single-gallery.html %}
    </div>
  {% endfor %}
</div>

{% if total_gallery > 0 %}
  <nav class="pagination" id="gallery-pagination" style="margin-top: 40px;">
    <ul id="pagination-list">
      <!-- Pagination will be generated by JavaScript -->
    </ul>
  </nav>
{% endif %}

<script>
(function() {
  const perPage = {{ per_page }};
  const totalGallery = {{ total_gallery }};
  const totalPages = Math.ceil(totalGallery / perPage);
  let currentPage = 1;
  
  // Get page from URL or default to 1
  const urlParams = new URLSearchParams(window.location.search);
  const pageParam = urlParams.get('page');
  if (pageParam) {
    currentPage = parseInt(pageParam) || 1;
    if (currentPage < 1) currentPage = 1;
    if (currentPage > totalPages) currentPage = totalPages;
  }
  
  function showPage(page) {
    const items = document.querySelectorAll('.gallery-item');
    items.forEach(item => {
      const itemPage = parseInt(item.getAttribute('data-page'));
      if (itemPage === page) {
        item.style.display = 'block';
      } else {
        item.style.display = 'none';
      }
    });
    updatePagination(page);
    // Update URL without reload
    const newUrl = page === 1 
      ? '{{ base_path }}/gallery/'
      : '{{ base_path }}/gallery/?page=' + page;
    window.history.pushState({page: page}, '', newUrl);
  }
  
  function updatePagination(page) {
    const paginationList = document.getElementById('pagination-list');
    if (!paginationList) {
      console.error('Pagination list not found');
      return;
    }
    
    paginationList.innerHTML = '';
    
    // If only one page, still show it
    if (totalPages <= 1 && totalGallery > 0) {
      const li = document.createElement('li');
      li.innerHTML = '<a href="#" class="disabled current">1</a>';
      paginationList.appendChild(li);
      return;
    }
    
    // Don't show pagination if no gallery items
    if (totalPages <= 0) {
      return;
    }
    
    // Previous button
    if (page > 1) {
      const prevLi = document.createElement('li');
      if (page === 2) {
        prevLi.innerHTML = '<a href="{{ base_path }}/gallery/">Previous</a>';
      } else {
        prevLi.innerHTML = '<a href="{{ base_path }}/gallery/?page=' + (page - 1) + '">Previous</a>';
      }
      prevLi.querySelector('a').addEventListener('click', function(e) {
        e.preventDefault();
        showPage(page - 1);
      });
      paginationList.appendChild(prevLi);
    } else {
      const prevLi = document.createElement('li');
      prevLi.innerHTML = '<a href="#" class="disabled"><span aria-hidden="true">Previous</span></a>';
      paginationList.appendChild(prevLi);
    }
    
    // Page numbers
    let startPage = Math.max(1, page - 2);
    let endPage = Math.min(totalPages, page + 2);
    
    if (startPage > 1) {
      const firstLi = document.createElement('li');
      firstLi.innerHTML = '<a href="{{ base_path }}/gallery/">1</a>';
      firstLi.querySelector('a').addEventListener('click', function(e) {
        e.preventDefault();
        showPage(1);
      });
      paginationList.appendChild(firstLi);
      if (startPage > 2) {
        const ellipsis = document.createElement('li');
        ellipsis.innerHTML = '<a href="#" class="disabled">&hellip;</a>';
        paginationList.appendChild(ellipsis);
      }
    }
    
    for (let i = startPage; i <= endPage; i++) {
      const li = document.createElement('li');
      if (i === page) {
        li.innerHTML = '<a href="#" class="disabled current">' + i + '</a>';
      } else if (i === 1) {
        li.innerHTML = '<a href="{{ base_path }}/gallery/">1</a>';
        li.querySelector('a').addEventListener('click', function(e) {
          e.preventDefault();
          showPage(1);
        });
      } else {
        li.innerHTML = '<a href="{{ base_path }}/gallery/?page=' + i + '">' + i + '</a>';
        li.querySelector('a').addEventListener('click', function(e) {
          e.preventDefault();
          showPage(i);
        });
      }
      paginationList.appendChild(li);
    }
    
    if (endPage < totalPages) {
      if (endPage < totalPages - 1) {
        const ellipsis = document.createElement('li');
        ellipsis.innerHTML = '<a href="#" class="disabled">&hellip;</a>';
        paginationList.appendChild(ellipsis);
      }
      const lastLi = document.createElement('li');
      lastLi.innerHTML = '<a href="{{ base_path }}/gallery/?page=' + totalPages + '">' + totalPages + '</a>';
      lastLi.querySelector('a').addEventListener('click', function(e) {
        e.preventDefault();
        showPage(totalPages);
      });
      paginationList.appendChild(lastLi);
    }
    
    // Next button
    if (page < totalPages) {
      const nextLi = document.createElement('li');
      nextLi.innerHTML = '<a href="{{ base_path }}/gallery/?page=' + (page + 1) + '">Next</a>';
      nextLi.querySelector('a').addEventListener('click', function(e) {
        e.preventDefault();
        showPage(page + 1);
      });
      paginationList.appendChild(nextLi);
    } else {
      const nextLi = document.createElement('li');
      nextLi.innerHTML = '<a href="#" class="disabled"><span aria-hidden="true">Next</span></a>';
      paginationList.appendChild(nextLi);
    }
  }
  
  // Initialize page display (this will also initialize pagination)
  showPage(currentPage);
  
  // Ensure pagination is visible even if only one page
  if (totalGallery > 0 && totalPages <= 1) {
    updatePagination(1);
  }
  
  // Handle browser back/forward
  window.addEventListener('popstate', function(e) {
    const urlParams = new URLSearchParams(window.location.search);
    const pageParam = urlParams.get('page');
    currentPage = pageParam ? parseInt(pageParam) || 1 : 1;
    showPage(currentPage);
  });
})();
</script>
