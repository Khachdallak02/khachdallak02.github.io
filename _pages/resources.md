---
layout: archive
permalink: /resources/
title: "Resources"
author_profile: true
---

{% include base_path %}

<style>
.page__title {
  text-align: center !important;
}
</style>

<div style="text-align: center; margin-bottom: 40px;">
  <p style="font-size: 0.9em; color: #666; margin-top: -10px; margin-bottom: 0;">Some tools that deserve free advertisement</p>
</div>

{% assign resources = site.resources | sort: 'date' | reverse %}
{% assign total_resources = resources | size %}
{% assign per_page = 10 %}

<div id="resources-container">
  {% for post in resources %}
    <div class="resource-item" data-page="{{ forloop.index0 | divided_by: per_page | plus: 1 }}" style="display: none;">
      {% include archive-single-resource.html %}
    </div>
  {% endfor %}
</div>

{% if total_resources > 0 %}
  <nav class="pagination" id="resources-pagination" style="margin-top: 40px;">
    <ul id="pagination-list">
      <!-- Pagination will be generated by JavaScript -->
    </ul>
  </nav>
{% endif %}

<script>
(function() {
  const perPage = {{ per_page }};
  const totalResources = {{ total_resources }};
  const totalPages = Math.ceil(totalResources / perPage);
  let currentPage = 1;
  
  // Get page from URL or default to 1
  const urlParams = new URLSearchParams(window.location.search);
  const pageParam = urlParams.get('page');
  if (pageParam) {
    currentPage = parseInt(pageParam) || 1;
    if (currentPage < 1) currentPage = 1;
    if (currentPage > totalPages) currentPage = totalPages;
  }
  
  function showPage(page) {
    const items = document.querySelectorAll('.resource-item');
    items.forEach(item => {
      const itemPage = parseInt(item.getAttribute('data-page'));
      if (itemPage === page) {
        item.style.display = 'block';
      } else {
        item.style.display = 'none';
      }
    });
    updatePagination(page);
    // Update URL without reload
    const newUrl = page === 1 
      ? '{{ base_path }}/resources/'
      : '{{ base_path }}/resources/?page=' + page;
    window.history.pushState({page: page}, '', newUrl);
  }
  
  function updatePagination(page) {
    const paginationList = document.getElementById('pagination-list');
    if (!paginationList) {
      console.error('Pagination list not found');
      return;
    }
    
    paginationList.innerHTML = '';
    
    // If only one page, still show it
    if (totalPages <= 1 && totalResources > 0) {
      const li = document.createElement('li');
      li.innerHTML = '<a href="#" class="disabled current">1</a>';
      paginationList.appendChild(li);
      return;
    }
    
    // Don't show pagination if no resources
    if (totalPages <= 0) {
      return;
    }
    
    // Previous button
    if (page > 1) {
      const prevLi = document.createElement('li');
      if (page === 2) {
        prevLi.innerHTML = '<a href="{{ base_path }}/resources/">Previous</a>';
      } else {
        prevLi.innerHTML = '<a href="{{ base_path }}/resources/?page=' + (page - 1) + '">Previous</a>';
      }
      prevLi.querySelector('a').addEventListener('click', function(e) {
        e.preventDefault();
        showPage(page - 1);
      });
      paginationList.appendChild(prevLi);
    } else {
      const prevLi = document.createElement('li');
      prevLi.innerHTML = '<a href="#" class="disabled"><span aria-hidden="true">Previous</span></a>';
      paginationList.appendChild(prevLi);
    }
    
    // Page numbers
    let startPage = Math.max(1, page - 2);
    let endPage = Math.min(totalPages, page + 2);
    
    if (startPage > 1) {
      const firstLi = document.createElement('li');
      firstLi.innerHTML = '<a href="{{ base_path }}/resources/">1</a>';
      firstLi.querySelector('a').addEventListener('click', function(e) {
        e.preventDefault();
        showPage(1);
      });
      paginationList.appendChild(firstLi);
      if (startPage > 2) {
        const ellipsis = document.createElement('li');
        ellipsis.innerHTML = '<a href="#" class="disabled">&hellip;</a>';
        paginationList.appendChild(ellipsis);
      }
    }
    
    for (let i = startPage; i <= endPage; i++) {
      const li = document.createElement('li');
      if (i === page) {
        li.innerHTML = '<a href="#" class="disabled current">' + i + '</a>';
      } else if (i === 1) {
        li.innerHTML = '<a href="{{ base_path }}/resources/">1</a>';
        li.querySelector('a').addEventListener('click', function(e) {
          e.preventDefault();
          showPage(1);
        });
      } else {
        li.innerHTML = '<a href="{{ base_path }}/resources/?page=' + i + '">' + i + '</a>';
        li.querySelector('a').addEventListener('click', function(e) {
          e.preventDefault();
          showPage(i);
        });
      }
      paginationList.appendChild(li);
    }
    
    if (endPage < totalPages) {
      if (endPage < totalPages - 1) {
        const ellipsis = document.createElement('li');
        ellipsis.innerHTML = '<a href="#" class="disabled">&hellip;</a>';
        paginationList.appendChild(ellipsis);
      }
      const lastLi = document.createElement('li');
      lastLi.innerHTML = '<a href="{{ base_path }}/resources/?page=' + totalPages + '">' + totalPages + '</a>';
      lastLi.querySelector('a').addEventListener('click', function(e) {
        e.preventDefault();
        showPage(totalPages);
      });
      paginationList.appendChild(lastLi);
    }
    
    // Next button
    if (page < totalPages) {
      const nextLi = document.createElement('li');
      nextLi.innerHTML = '<a href="{{ base_path }}/resources/?page=' + (page + 1) + '">Next</a>';
      nextLi.querySelector('a').addEventListener('click', function(e) {
        e.preventDefault();
        showPage(page + 1);
      });
      paginationList.appendChild(nextLi);
    } else {
      const nextLi = document.createElement('li');
      nextLi.innerHTML = '<a href="#" class="disabled"><span aria-hidden="true">Next</span></a>';
      paginationList.appendChild(nextLi);
    }
  }
  
  // Initialize page display (this will also initialize pagination)
  showPage(currentPage);
  
  // Ensure pagination is visible even if only one page
  if (totalResources > 0 && totalPages <= 1) {
    updatePagination(1);
  }
  
  // Handle browser back/forward
  window.addEventListener('popstate', function(e) {
    const urlParams = new URLSearchParams(window.location.search);
    const pageParam = urlParams.get('page');
    currentPage = pageParam ? parseInt(pageParam) || 1 : 1;
    showPage(currentPage);
  });
})();
</script>
